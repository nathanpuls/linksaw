import{s as N,n as I,o as Y}from"../chunks/scheduler.Dw93JyHj.js";import{S as O,i as P,C as B,D as S,a as E,d as m,n as p,A as L,g as k,h as v,e as b,s as y,c as w,k as U,f as H,r as C,u as j,x as q,l as G,t as W,m as z,b as F,p as J,j as K,v as Q,y as A,w as x,q as ee}from"../chunks/index.mMZYYaUn.js";import{e as T}from"../chunks/each.D6YF6ztN.js";import{a as te}from"../chunks/firebase.4_HkC9tC.js";import{g as le,r as ne,o as re}from"../chunks/index.esm2017.CPFognq0.js";import{U as se}from"../chunks/User.BvImNQnt.js";function D(c){return c.startsWith("http")?c:"http://"+c}function oe(c){let e,r;return{c(){e=B("svg"),r=B("path"),this.h()},l(s){e=S(s,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,style:!0});var t=E(e);r=S(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(r).forEach(m),t.forEach(m),this.h()},h(){p(r,"stroke-linecap","round"),p(r,"stroke-linejoin","round"),p(r,"d","M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"stroke-width","1.5"),p(e,"stroke","currentColor"),L(e,"width",c[0]+"rem"),L(e,"margin-left",c[1]+"rem"),L(e,"color",c[2])},m(s,t){k(s,e,t),v(e,r)},p(s,[t]){t&1&&L(e,"width",s[0]+"rem"),t&2&&L(e,"margin-left",s[1]+"rem"),t&4&&L(e,"color",s[2])},i:I,o:I,d(s){s&&m(e)}}}function X(){console.log("SVG Clicked!")}function ae(c,e,r){let{width:s="1.5"}=e,{ml:t="0"}=e,{color:h="black"}=e;return c.$$set=l=>{"width"in l&&r(0,s=l.width),"ml"in l&&r(1,t=l.ml),"color"in l&&r(2,h=l.color)},[s,t,h,X]}class ie extends O{constructor(e){super(),P(this,e,ae,oe,N,{width:0,ml:1,color:2,handleClick:3})}get handleClick(){return X}}function R(c,e,r){const s=c.slice();return s[5]=e[r][0],s[6]=e[r][1],s}function V(c){let e,r,s,t,h,l,a,n="justsomesa",d,i,g="<button>Add link</button>",_;return r=new se({props:{atusername:c[1],username:c[0]}}),{c(){e=b("h4"),G(r.$$.fragment),s=y(),t=b("h4"),h=W(c[1]),l=y(),a=b("p"),a.textContent=n,d=y(),i=b("a"),i.innerHTML=g,this.h()},l(u){e=w(u,"H4",{});var o=E(e);z(r.$$.fragment,o),o.forEach(m),s=H(u),t=w(u,"H4",{});var f=E(t);h=F(f,c[1]),f.forEach(m),l=H(u),a=w(u,"P",{class:!0,"data-svelte-h":!0}),U(a)!=="svelte-ur0tjy"&&(a.textContent=n),d=H(u),i=w(u,"A",{href:!0,"data-svelte-h":!0}),U(i)!=="svelte-6xue26"&&(i.innerHTML=g),this.h()},h(){p(a,"class","invisible svelte-os3wqy"),p(i,"href","../addlink")},m(u,o){k(u,e,o),J(r,e,null),k(u,s,o),k(u,t,o),v(t,h),k(u,l,o),k(u,a,o),k(u,d,o),k(u,i,o),_=!0},p(u,o){const f={};o&2&&(f.atusername=u[1]),o&1&&(f.username=u[0]),r.$set(f),(!_||o&2)&&K(h,u[1])},i(u){_||(C(r.$$.fragment,u),_=!0)},o(u){j(r.$$.fragment,u),_=!1},d(u){u&&(m(e),m(s),m(t),m(l),m(a),m(d),m(i)),Q(r)}}}function ce(c){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function ue(c){let e,r,s=T(c[3]),t=[];for(let l=0;l<s.length;l+=1)t[l]=Z(R(c,s,l));const h=l=>j(t[l],1,1,()=>{t[l]=null});return{c(){e=b("ul");for(let l=0;l<t.length;l+=1)t[l].c()},l(l){e=w(l,"UL",{});var a=E(e);for(let n=0;n<t.length;n+=1)t[n].l(a);a.forEach(m)},m(l,a){k(l,e,a);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null);r=!0},p(l,a){if(a&12){s=T(l[3]);let n;for(n=0;n<s.length;n+=1){const d=R(l,s,n);t[n]?(t[n].p(d,a),C(t[n],1)):(t[n]=Z(d),t[n].c(),C(t[n],1),t[n].m(e,null))}for(A(),n=s.length;n<t.length;n+=1)h(n);q()}},i(l){if(!r){for(let a=0;a<s.length;a+=1)C(t[a]);r=!0}},o(l){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)j(t[a]);r=!1},d(l){l&&m(e),x(t,l)}}}function Z(c){let e,r,s,t,h,l=c[6].name+"",a,n,d,i,g,_;s=new ie({});function u(){return c[4](c[6])}return{c(){e=b("li"),r=b("button"),G(s.$$.fragment),t=y(),h=b("a"),a=W(l),d=y(),this.h()},l(o){e=w(o,"LI",{});var f=E(e);r=w(f,"BUTTON",{class:!0});var M=E(r);z(s.$$.fragment,M),M.forEach(m),t=H(f),h=w(f,"A",{href:!0,target:!0});var $=E(h);a=F($,l),$.forEach(m),d=H(f),f.forEach(m),this.h()},h(){p(r,"class","btnless"),p(h,"href",n=D(c[6].url)),p(h,"target","_blank")},m(o,f){k(o,e,f),v(e,r),J(s,r,null),v(e,t),v(e,h),v(h,a),v(e,d),i=!0,g||(_=ee(r,"click",u),g=!0)},p(o,f){c=o,(!i||f&8)&&l!==(l=c[6].name+"")&&K(a,l),(!i||f&8&&n!==(n=D(c[6].url)))&&p(h,"href",n)},i(o){i||(C(s.$$.fragment,o),i=!0)},o(o){j(s.$$.fragment,o),i=!1},d(o){o&&m(e),Q(s),g=!1,_()}}}function fe(c){let e,r,s="Links",t,h,l,a,n,d,i=c[0]&&V(c);const g=[ue,ce],_=[];function u(o,f){return o[3].length>0?0:1}return a=u(c),n=_[a]=g[a](c),{c(){e=b("main"),r=b("h4"),r.textContent=s,t=y(),h=b("div"),i&&i.c(),l=y(),n.c(),this.h()},l(o){e=w(o,"MAIN",{class:!0});var f=E(e);r=w(f,"H4",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-b5p1tn"&&(r.textContent=s),t=H(f),h=w(f,"DIV",{class:!0});var M=E(h);i&&i.l(M),M.forEach(m),l=H(f),n.l(f),f.forEach(m),this.h()},h(){p(r,"class","center"),p(h,"class","pagerow svelte-os3wqy"),p(e,"class","svelte-os3wqy")},m(o,f){k(o,e,f),v(e,r),v(e,t),v(e,h),i&&i.m(h,null),v(e,l),_[a].m(e,null),d=!0},p(o,[f]){o[0]?i?(i.p(o,f),f&1&&C(i,1)):(i=V(o),i.c(),C(i,1),i.m(h,null)):i&&(A(),j(i,1,1,()=>{i=null}),q());let M=a;a=u(o),a===M?_[a].p(o,f):(A(),j(_[M],1,1,()=>{_[M]=null}),q(),n=_[a],n?n.p(o,f):(n=_[a]=g[a](o),n.c()),C(n,1),n.m(e,null))},i(o){d||(C(i),C(n),d=!0)},o(o){j(i),j(n),d=!1},d(o){o&&m(e),i&&i.d(),_[a].d()}}}function he(c,e,r){let s,t,h,l=[];return Y(()=>{if(r(0,s=localStorage.getItem("username")),!s){window.location.href="/";return}const n=le(te),d=ne(n,`users/${s}/links`);r(1,t=`@${s}`),re(d,i=>{const g=i.val();r(3,l=g?Object.entries(g):[]),l.sort((_,u)=>u[1].timestamp-_[1].timestamp),console.log(l[1])}),r(2,h=(i,g)=>{console.log("Clicked on:",i,g),window.location.href=`/edit-link?name=${encodeURIComponent(i)}&url=${encodeURIComponent(g)}`,console.log("click")})}),[s,t,h,l,n=>h(n.name,n.url)]}class ve extends O{constructor(e){super(),P(this,e,he,fe,N,{})}}export{ve as component};
