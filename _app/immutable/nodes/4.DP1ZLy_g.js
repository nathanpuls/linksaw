import{s as M,r as j,o as D}from"../chunks/scheduler.Cx9Dz3y6.js";import{S as K,i as O,e as d,s as g,t as z,l as F,c as h,a as B,k as A,f as b,b as G,d as T,m as H,n as N,g as S,h as r,o as x,p as J,q as U,j as Q,r as V,u as W,v as X}from"../chunks/index.CaLiHKVj.js";import{a as Y}from"../chunks/firebase.4_HkC9tC.js";import{g as Z,r as ee,a as te,c as $,s as se,b as ae}from"../chunks/index.esm2017.CPFognq0.js";import{U as ne}from"../chunks/User.BW3M-KQg.js";function re(o){let s,n,l="Name",u,a,f,m,L="URL",v,i,c,p,I="Add",y,k,w,E,_,C,P,R;return _=new ne({}),{c(){s=d("main"),n=d("label"),n.textContent=l,u=g(),a=d("input"),f=g(),m=d("label"),m.textContent=L,v=g(),i=d("input"),c=g(),p=d("button"),p.textContent=I,y=g(),k=d("p"),w=z(o[2]),E=g(),F(_.$$.fragment),this.h()},l(e){s=h(e,"MAIN",{});var t=B(s);n=h(t,"LABEL",{for:!0,"data-svelte-h":!0}),A(n)!=="svelte-bs9sy6"&&(n.textContent=l),u=b(t),a=h(t,"INPUT",{type:!0,id:!0}),f=b(t),m=h(t,"LABEL",{for:!0,"data-svelte-h":!0}),A(m)!=="svelte-8q15uc"&&(m.textContent=L),v=b(t),i=h(t,"INPUT",{id:!0}),c=b(t),p=h(t,"BUTTON",{"data-svelte-h":!0}),A(p)!=="svelte-12ksf09"&&(p.textContent=I),y=b(t),k=h(t,"P",{});var q=B(k);w=G(q,o[2]),q.forEach(T),t.forEach(T),E=b(e),H(_.$$.fragment,e),this.h()},h(){N(n,"for","name"),N(a,"type","text"),N(a,"id","name"),a.autofocus=!0,N(m,"for","URL"),N(i,"id","url")},m(e,t){S(e,s,t),r(s,n),r(s,u),r(s,a),x(a,o[0]),r(s,f),r(s,m),r(s,v),r(s,i),x(i,o[1]),r(s,c),r(s,p),r(s,y),r(s,k),r(k,w),S(e,E,t),J(_,e,t),C=!0,a.focus(),P||(R=[U(a,"input",o[5]),U(a,"keypress",o[4]),U(i,"input",o[6]),U(i,"keypress",o[4]),U(p,"click",o[3])],P=!0)},p(e,[t]){t&1&&a.value!==e[0]&&x(a,e[0]),t&2&&i.value!==e[1]&&x(i,e[1]),(!C||t&4)&&Q(w,e[2])},i(e){C||(V(_.$$.fragment,e),C=!0)},o(e){W(_.$$.fragment,e),C=!1},d(e){e&&(T(s),T(E)),X(_,e),P=!1,j(R)}}}function oe(o,s,n){let l="",u="",a,f="";D(()=>{a=localStorage.getItem("username")});async function m(){if(!l.trim()||!u.trim()){console.log("Name and URL cannot be blank.");return}const c=Z(Y),p=ee(c,`users/${a}/links`);if((await te($(p,l))).exists()){console.log("Name already exists."),n(2,f="Name already exists"),setTimeout(()=>{n(2,f="")},2e3);return}try{await se($(p,l),{name:l,url:u,timestamp:ae()}),n(0,l=""),n(1,u=""),window.location.href="/links"}catch(y){console.error("Error adding link:",y)}}function L(c){c.key==="Enter"&&m()}function v(){l=this.value,n(0,l)}function i(){u=this.value,n(1,u)}return[l,u,f,m,L,v,i]}class fe extends K{constructor(s){super(),O(this,s,oe,re,M,{})}}export{fe as component};
