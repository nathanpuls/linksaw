import{s as z,r as F,o as G}from"../chunks/scheduler.Dw93JyHj.js";import{S as J,i as Q,e as p,s as _,t as V,l as W,c,a as D,k as E,f as h,b as X,d as P,m as Y,n as x,g as H,h as a,o as q,p as Z,q as N,j as tt,r as et,u as nt,v as at}from"../chunks/index.mMZYYaUn.js";import{a as st}from"../chunks/firebase.4_HkC9tC.js";import{g as ot,r as lt,a as rt,c as K,s as it,b as ut}from"../chunks/index.esm2017.CPFognq0.js";import{U as mt}from"../chunks/User.BvImNQnt.js";function ft(l){let e,o,r="Add Link",i,u,C="Name",g,s,U,f,k="URL",y,m,w,b,$="Add",B,d,M="Cancel",R,L,A,I,v,T,S,O;return v=new mt({}),{c(){e=p("main"),o=p("h4"),o.textContent=r,i=_(),u=p("label"),u.textContent=C,g=_(),s=p("input"),U=_(),f=p("label"),f.textContent=k,y=_(),m=p("input"),w=_(),b=p("button"),b.textContent=$,B=_(),d=p("button"),d.textContent=M,R=_(),L=p("p"),A=V(l[2]),I=_(),W(v.$$.fragment),this.h()},l(n){e=c(n,"MAIN",{});var t=D(e);o=c(t,"H4",{"data-svelte-h":!0}),E(o)!=="svelte-1gkuabv"&&(o.textContent=r),i=h(t),u=c(t,"LABEL",{for:!0,"data-svelte-h":!0}),E(u)!=="svelte-bs9sy6"&&(u.textContent=C),g=h(t),s=c(t,"INPUT",{type:!0,id:!0}),U=h(t),f=c(t,"LABEL",{for:!0,"data-svelte-h":!0}),E(f)!=="svelte-8q15uc"&&(f.textContent=k),y=h(t),m=c(t,"INPUT",{id:!0}),w=h(t),b=c(t,"BUTTON",{"data-svelte-h":!0}),E(b)!=="svelte-12ksf09"&&(b.textContent=$),B=h(t),d=c(t,"BUTTON",{class:!0,"data-svelte-h":!0}),E(d)!=="svelte-1cgk8qu"&&(d.textContent=M),R=h(t),L=c(t,"P",{});var j=D(L);A=X(j,l[2]),j.forEach(P),t.forEach(P),I=h(n),Y(v.$$.fragment,n),this.h()},h(){x(u,"for","name"),x(s,"type","text"),x(s,"id","name"),s.autofocus=!0,x(f,"for","URL"),x(m,"id","url"),x(d,"class","button-outline")},m(n,t){H(n,e,t),a(e,o),a(e,i),a(e,u),a(e,g),a(e,s),q(s,l[0]),a(e,U),a(e,f),a(e,y),a(e,m),q(m,l[1]),a(e,w),a(e,b),a(e,B),a(e,d),a(e,R),a(e,L),a(L,A),H(n,I,t),Z(v,n,t),T=!0,s.focus(),S||(O=[N(s,"input",l[5]),N(s,"keypress",l[4]),N(m,"input",l[6]),N(m,"keypress",l[4]),N(b,"click",l[3]),N(d,"click",pt)],S=!0)},p(n,[t]){t&1&&s.value!==n[0]&&q(s,n[0]),t&2&&m.value!==n[1]&&q(m,n[1]),(!T||t&4)&&tt(A,n[2])},i(n){T||(et(v.$$.fragment,n),T=!0)},o(n){nt(v.$$.fragment,n),T=!1},d(n){n&&(P(e),P(I)),at(v,n),S=!1,F(O)}}}function pt(){window.location.href="/links"}function ct(l,e,o){let r="",i="",u,C="";G(()=>{u=localStorage.getItem("username")});async function g(){if(!r.trim()||!i.trim()){console.log("Name and URL cannot be blank.");return}const k=ot(st),y=lt(k,`users/${u}/links`);if((await rt(K(y,r))).exists()){console.log("Name already exists."),o(2,C="Name already exists"),setTimeout(()=>{o(2,C="")},2e3);return}try{await it(K(y,r),{name:r,url:i,timestamp:ut()}),o(0,r=""),o(1,i=""),window.location.href="/links"}catch(w){console.error("Error adding link:",w)}}function s(k){k.key==="Enter"&&g()}function U(){r=this.value,o(0,r)}function f(){i=this.value,o(1,i)}return[r,i,C,g,s,U,f]}class Ct extends J{constructor(e){super(),Q(this,e,ct,ft,z,{})}}export{Ct as component};
