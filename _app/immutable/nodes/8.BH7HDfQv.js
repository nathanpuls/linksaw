import{s as G,n as q,r as me,o as fe}from"../chunks/scheduler.Cx9Dz3y6.js";import{S as J,i as Q,C as O,D as M,a as y,d as w,n as s,A as g,g as W,h as a,e as p,s as x,l as ne,t as he,c as k,k as R,f as E,m as re,b as de,p as oe,o as S,q as L,j as we,r as se,u as le,v as ae}from"../chunks/index.CaLiHKVj.js";import{a as ie}from"../chunks/firebase.4_HkC9tC.js";import{g as ue,d as ce,r as F,s as ge,b as ve}from"../chunks/index.esm2017.CPFognq0.js";function pe(l){let e,t;return{c(){e=O("svg"),t=O("path"),this.h()},l(n){e=M(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,style:!0,class:!0});var r=y(e);t=M(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(w),r.forEach(w),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),g(e,"width",l[0]+"rem"),g(e,"margin-left",l[1]+"rem"),g(e,"color",l[2]),s(e,"class","svelte-1n1px90")},m(n,r){W(n,e,r),a(e,t)},p(n,[r]){r&1&&g(e,"width",n[0]+"rem"),r&2&&g(e,"margin-left",n[1]+"rem"),r&4&&g(e,"color",n[2])},i:q,o:q,d(n){n&&w(e)}}}function ke(l,e,t){let{width:n="2"}=e,{ml:r="0"}=e,{color:u="black"}=e;return l.$$set=o=>{"width"in o&&t(0,n=o.width),"ml"in o&&t(1,r=o.ml),"color"in o&&t(2,u=o.color)},[n,r,u]}class _e extends J{constructor(e){super(),Q(this,e,ke,pe,G,{width:0,ml:1,color:2})}}function be(l){let e,t;return{c(){e=O("svg"),t=O("path"),this.h()},l(n){e=M(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,style:!0});var r=y(e);t=M(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(w),r.forEach(w),this.h()},h(){s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"d","M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24"),s(e,"stroke-width","1.5"),s(e,"stroke","currentColor"),g(e,"width",l[0]+"rem"),g(e,"margin-left",l[1]+"rem"),g(e,"color",l[2])},m(n,r){W(n,e,r),a(e,t)},p(n,[r]){r&1&&g(e,"width",n[0]+"rem"),r&2&&g(e,"margin-left",n[1]+"rem"),r&4&&g(e,"color",n[2])},i:q,o:q,d(n){n&&w(e)}}}function ye(l,e,t){let{width:n="2"}=e,{ml:r="0"}=e,{color:u="black"}=e;return l.$$set=o=>{"width"in o&&t(0,n=o.width),"ml"in o&&t(1,r=o.ml),"color"in o&&t(2,u=o.color)},[n,r,u]}class Ce extends J{constructor(e){super(),Q(this,e,ye,be,G,{width:0,ml:1,color:2})}}function Te(l){let e,t,n,r="Name",u,o,f,N,v,_,I,h,D,b,A="URL",d,c,B,C,X="Save",V,T,Y="Cancel",z,U,H,j,K,Z;return f=new Ce({}),_=new _e({}),{c(){e=p("main"),t=p("div"),n=p("label"),n.textContent=r,u=x(),o=p("button"),ne(f.$$.fragment),N=x(),v=p("button"),ne(_.$$.fragment),I=x(),h=p("input"),D=x(),b=p("label"),b.textContent=A,d=x(),c=p("input"),B=x(),C=p("button"),C.textContent=X,V=x(),T=p("button"),T.textContent=Y,z=x(),U=p("p"),H=he(l[2]),this.h()},l(m){e=k(m,"MAIN",{});var i=y(e);t=k(i,"DIV",{class:!0});var P=y(t);n=k(P,"LABEL",{for:!0,"data-svelte-h":!0}),R(n)!=="svelte-bs9sy6"&&(n.textContent=r),u=E(P),o=k(P,"BUTTON",{class:!0});var $=y(o);re(f.$$.fragment,$),$.forEach(w),N=E(P),v=k(P,"BUTTON",{class:!0});var ee=y(v);re(_.$$.fragment,ee),ee.forEach(w),P.forEach(w),I=E(i),h=k(i,"INPUT",{type:!0,id:!0}),D=E(i),b=k(i,"LABEL",{for:!0,"data-svelte-h":!0}),R(b)!=="svelte-8q15uc"&&(b.textContent=A),d=E(i),c=k(i,"INPUT",{id:!0}),B=E(i),C=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),R(C)!=="svelte-b7uzot"&&(C.textContent=X),V=E(i),T=k(i,"BUTTON",{class:!0,"data-svelte-h":!0}),R(T)!=="svelte-1cgk8qu"&&(T.textContent=Y),z=E(i),U=k(i,"P",{class:!0});var te=y(U);H=de(te,l[2]),te.forEach(w),i.forEach(w),this.h()},h(){s(n,"for","name"),s(o,"class","btnless svelte-enuxhm"),s(v,"class","btnless svelte-enuxhm"),s(t,"class","lrow"),s(h,"type","text"),s(h,"id","name"),h.autofocus=!0,s(b,"for","URL"),s(c,"id","url"),s(C,"class","svelte-enuxhm"),s(T,"class","button-outline svelte-enuxhm"),s(U,"class","svelte-enuxhm")},m(m,i){W(m,e,i),a(e,t),a(t,n),a(t,u),a(t,o),oe(f,o,null),a(t,N),a(t,v),oe(_,v,null),a(e,I),a(e,h),S(h,l[0]),a(e,D),a(e,b),a(e,d),a(e,c),S(c,l[1]),a(e,B),a(e,C),a(e,V),a(e,T),a(e,z),a(e,U),a(U,H),j=!0,h.focus(),K||(Z=[L(o,"click",l[4]),L(v,"click",l[5]),L(h,"input",l[7]),L(h,"keypress",l[6]),L(c,"input",l[8]),L(c,"keypress",l[6]),L(C,"click",l[3]),L(T,"click",xe)],K=!0)},p(m,[i]){i&1&&h.value!==m[0]&&S(h,m[0]),i&2&&c.value!==m[1]&&S(c,m[1]),(!j||i&4)&&we(H,m[2])},i(m){j||(se(f.$$.fragment,m),se(_.$$.fragment,m),j=!0)},o(m){le(f.$$.fragment,m),le(_.$$.fragment,m),j=!1},d(m){m&&w(e),ae(f),ae(_),K=!1,me(Z)}}}function xe(){window.location.href="/links"}function Ee(l,e,t){let n,r,u="",o="",f,N="",v="";fe(()=>{f=localStorage.getItem("username");function d(c){return new URLSearchParams(window.location.search).get(c)}n=d("name"),r=d("url"),n&&(t(0,u=n),t(1,o=r))});async function _(){if(!u.trim()||!o.trim()){console.log("Name and URL cannot be blank.");return}const d=ue(ie);try{u!==n&&await ce(F(d,`users/${f}/links/${n}`));const c=F(d,`users/${f}/links/${u}`);await ge(c,{name:u,url:o,timestamp:ve()}),t(0,u=""),t(1,o=""),window.location.href="/links"}catch(c){console.error("Error adding/updating link:",c)}}function I(){console.log(n),console.log(r),console.log(f),t(2,v="Copied shortlink"),console.log(N),N=`http://${n}.linksaw.com/${f}`,navigator.clipboard.writeText(N),setTimeout(()=>{t(2,v="")},2e3)}async function h(){if(!n){console.log("No link to delete.");return}if(!window.confirm("Are you sure you want to delete this link?"))return;const c=ue(ie);try{await ce(F(c,`users/${f}/links/${n}`)),window.location.href="/links"}catch(B){console.error("Error deleting link:",B)}}function D(d){d.key==="Enter"&&_()}function b(){u=this.value,t(0,u)}function A(){o=this.value,t(1,o)}return[u,o,v,_,I,h,D,b,A]}class Pe extends J{constructor(e){super(),Q(this,e,Ee,Te,G,{})}}export{Pe as component};
