import{s as z,n as $,o as ee}from"../chunks/scheduler.Cx9Dz3y6.js";import{S as D,i as O,C as S,D as T,a as E,d as g,n as p,A,g as B,h as k,e as w,l as P,s as j,t as V,c as C,m as G,f as q,b as W,k as F,p as J,j as K,u as H,x as Q,r as M,v as X,y as Y,w as te,q as ne}from"../chunks/index.CaLiHKVj.js";import{e as y}from"../chunks/each.D6YF6ztN.js";import{a as le}from"../chunks/firebase.4_HkC9tC.js";import{g as re,r as oe,o as ae}from"../chunks/index.esm2017.CPFognq0.js";import{U as se}from"../chunks/User.BW3M-KQg.js";function N(a){return a.startsWith("http")?a:"http://"+a}function ie(a){let e,o;return{c(){e=S("svg"),o=S("path"),this.h()},l(t){e=T(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,style:!0});var n=E(e);o=T(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(o).forEach(g),n.forEach(g),this.h()},h(){p(o,"stroke-linecap","round"),p(o,"stroke-linejoin","round"),p(o,"d","M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"stroke-width","1.5"),p(e,"stroke","currentColor"),A(e,"width",a[0]+"rem"),A(e,"margin-left",a[1]+"rem"),A(e,"color",a[2])},m(t,n){B(t,e,n),k(e,o)},p(t,[n]){n&1&&A(e,"width",t[0]+"rem"),n&2&&A(e,"margin-left",t[1]+"rem"),n&4&&A(e,"color",t[2])},i:$,o:$,d(t){t&&g(e)}}}function x(){console.log("SVG Clicked!")}function ce(a,e,o){let{width:t="1.5"}=e,{ml:n="0"}=e,{color:i="black"}=e;return a.$$set=l=>{"width"in l&&o(0,t=l.width),"ml"in l&&o(1,n=l.ml),"color"in l&&o(2,i=l.color)},[t,n,i,x]}class ue extends D{constructor(e){super(),O(this,e,ce,ie,z,{width:0,ml:1,color:2,handleClick:3})}get handleClick(){return x}}function R(a,e,o){const t=a.slice();return t[5]=e[o][0],t[6]=e[o][1],t}function fe(a){let e,o="No links available";return{c(){e=w("p"),e.textContent=o},l(t){e=C(t,"P",{"data-svelte-h":!0}),F(e)!=="svelte-1t2d3xn"&&(e.textContent=o)},m(t,n){B(t,e,n)},p:$,i:$,o:$,d(t){t&&g(e)}}}function he(a){let e,o,t=y(a[3]),n=[];for(let l=0;l<t.length;l+=1)n[l]=Z(R(a,t,l));const i=l=>H(n[l],1,1,()=>{n[l]=null});return{c(){e=w("ul");for(let l=0;l<n.length;l+=1)n[l].c()},l(l){e=C(l,"UL",{});var s=E(e);for(let r=0;r<n.length;r+=1)n[r].l(s);s.forEach(g)},m(l,s){B(l,e,s);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);o=!0},p(l,s){if(s&12){t=y(l[3]);let r;for(r=0;r<t.length;r+=1){const v=R(l,t,r);n[r]?(n[r].p(v,s),M(n[r],1)):(n[r]=Z(v),n[r].c(),M(n[r],1),n[r].m(e,null))}for(Y(),r=t.length;r<n.length;r+=1)i(r);Q()}},i(l){if(!o){for(let s=0;s<t.length;s+=1)M(n[s]);o=!0}},o(l){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)H(n[s]);o=!1},d(l){l&&g(e),te(n,l)}}}function Z(a){let e,o,t,n,i,l=a[6].name+"",s,r,v,_,c,h;t=new ue({});function b(){return a[4](a[6])}return{c(){e=w("li"),o=w("button"),P(t.$$.fragment),n=j(),i=w("a"),s=V(l),v=j(),this.h()},l(d){e=C(d,"LI",{});var f=E(e);o=C(f,"BUTTON",{class:!0});var L=E(o);G(t.$$.fragment,L),L.forEach(g),n=q(f),i=C(f,"A",{href:!0,target:!0});var u=E(i);s=W(u,l),u.forEach(g),v=q(f),f.forEach(g),this.h()},h(){p(o,"class","btnless svelte-16pwzkq"),p(i,"href",r=N(a[6].url)),p(i,"target","_blank")},m(d,f){B(d,e,f),k(e,o),J(t,o,null),k(e,n),k(e,i),k(i,s),k(e,v),_=!0,c||(h=ne(o,"click",b),c=!0)},p(d,f){a=d,(!_||f&8)&&l!==(l=a[6].name+"")&&K(s,l),(!_||f&8&&r!==(r=N(a[6].url)))&&p(i,"href",r)},i(d){_||(M(t.$$.fragment,d),_=!0)},o(d){H(t.$$.fragment,d),_=!1},d(d){d&&g(e),X(t),c=!1,h()}}}function me(a){let e,o,t,n,i,l,s,r,v='<button class="svelte-16pwzkq">Add link</button>',_,c,h,b;t=new se({props:{atusername:a[1],username:a[0]}});const d=[he,fe],f=[];function L(u,m){return u[3].length>0?0:1}return c=L(a),h=f[c]=d[c](a),{c(){e=w("main"),o=w("h4"),P(t.$$.fragment),n=j(),i=w("h4"),l=V(a[1]),s=j(),r=w("a"),r.innerHTML=v,_=j(),h.c(),this.h()},l(u){e=C(u,"MAIN",{});var m=E(e);o=C(m,"H4",{});var I=E(o);G(t.$$.fragment,I),I.forEach(g),n=q(m),i=C(m,"H4",{});var U=E(i);l=W(U,a[1]),U.forEach(g),s=q(m),r=C(m,"A",{href:!0,"data-svelte-h":!0}),F(r)!=="svelte-6xue26"&&(r.innerHTML=v),_=q(m),h.l(m),m.forEach(g),this.h()},h(){p(r,"href","../addlink")},m(u,m){B(u,e,m),k(e,o),J(t,o,null),k(e,n),k(e,i),k(i,l),k(e,s),k(e,r),k(e,_),f[c].m(e,null),b=!0},p(u,[m]){const I={};m&2&&(I.atusername=u[1]),m&1&&(I.username=u[0]),t.$set(I),(!b||m&2)&&K(l,u[1]);let U=c;c=L(u),c===U?f[c].p(u,m):(Y(),H(f[U],1,1,()=>{f[U]=null}),Q(),h=f[c],h?h.p(u,m):(h=f[c]=d[c](u),h.c()),M(h,1),h.m(e,null))},i(u){b||(M(t.$$.fragment,u),M(h),b=!0)},o(u){H(t.$$.fragment,u),H(h),b=!1},d(u){u&&g(e),X(t),f[c].d()}}}function _e(a,e,o){let t,n,i,l=[];return ee(()=>{o(0,t=localStorage.getItem("username"));const r=re(le),v=oe(r,`users/${t}/links`);o(1,n=`@${t}`),ae(v,_=>{const c=_.val();o(3,l=c?Object.entries(c):[]),l.sort((h,b)=>b[1].timestamp-h[1].timestamp),console.log(l[1])}),o(2,i=(_,c)=>{console.log("Clicked on:",_,c),window.location.href=`/edit-link?name=${encodeURIComponent(_)}&url=${encodeURIComponent(c)}`,console.log("click")})}),[t,n,i,l,r=>i(r.name,r.url)]}class we extends D{constructor(e){super(),O(this,e,_e,me,z,{})}}export{we as component};
