import{s as m,n as c,o as p}from"../chunks/scheduler.Dw93JyHj.js";import{S as d,i as g,e as k,c as v,k as w,n as x,g as _,d as y}from"../chunks/index.mMZYYaUn.js";import{g as D,r as L,a as R}from"../chunks/index.esm2017.CPFognq0.js";import{a as $}from"../chunks/firebase.4_HkC9tC.js";function C(a){let e,n="<h5>Redirecting...</h5>";return{c(){e=k("div"),e.innerHTML=n,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),w(e)!=="svelte-1vef7pf"&&(e.innerHTML=n),this.h()},h(){x(e,"class","center")},m(t,s){_(t,e,s)},p:c,i:c,o:c,d(t){t&&y(e)}}}function u(a,e){e||(e=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),t=n.exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function M(a){let e,n;return p(()=>{const t=D($);e=u("username"),e&&(e=e.replace(/[^a-zA-Z0-9]/g,"")),n=u("linkname"),console.log("Username:",e,"Linkname:",n);async function s(){try{const o=L(t,`users/${e}/links`),l=await R(o);if(l.exists()){const f=l.val();for(const h in f){const i=f[h];if(i&&i.name===n){let r=i.url;!r.startsWith("http://")&&!r.startsWith("https://")&&!r.startsWith("www")&&(r="http://"+r),console.log("Redirecting to:",r),window.location.href=r;return}}console.error("Link not found.")}else console.error("User not found.")}catch(o){console.error("Error fetching link data:",o)}}s()}),[]}class E extends d{constructor(e){super(),g(this,e,M,C,m,{})}}export{E as component};
