import{s as d,n as l,o as g}from"../chunks/scheduler.Dw93JyHj.js";import{S as k,i as x,e as v,t as w,c as _,k as y,b as D,n as L,g as u,d as m}from"../chunks/index.mMZYYaUn.js";import{g as R,r as $,a as b}from"../chunks/index.esm2017.CPFognq0.js";import{a as C}from"../chunks/firebase.4_HkC9tC.js";function M(r){let e,a="<h5>Redirecting...</h5> ",t;return{c(){e=v("div"),e.innerHTML=a,t=w("``"),this.h()},l(n){e=_(n,"DIV",{class:!0,"data-svelte-h":!0}),y(e)!=="svelte-1vef7pf"&&(e.innerHTML=a),t=D(n,"``"),this.h()},h(){L(e,"class","center")},m(n,o){u(n,e,o),u(n,t,o)},p:l,i:l,o:l,d(n){n&&(m(e),m(t))}}}function h(r,e){e||(e=window.location.href),r=r.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+r+"(=([^&#]*)|&|#|$)"),t=a.exec(e);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function S(r){let e,a;return g(()=>{const t=R(C);e=h("username"),e&&(e=e.replace(/[^a-zA-Z0-9]/g,"")),a=h("linkname"),console.log("Username:",e,"Linkname:",a);async function n(){try{const o=$(t,`users/${e}/links`),c=await b(o);if(c.exists()){const f=c.val();for(const p in f){const i=f[p];if(i&&i.name===a){let s=i.url;!s.startsWith("http://")&&!s.startsWith("https://")&&!s.startsWith("www")&&(s="http://"+s),console.log("Redirecting to:",s),window.location.href=s;return}}console.error("Link not found.")}else console.error("User not found.")}catch(o){console.error("Error fetching link data:",o)}}n()}),[]}class I extends k{constructor(e){super(),x(this,e,S,M,d,{})}}export{I as component};
