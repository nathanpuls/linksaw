import{s as X,n as V,r as wt,o as gt}from"../chunks/scheduler.Dw93JyHj.js";import{S as Y,i as Z,C as M,D as z,a as b,d as v,n as o,A as w,g as $,h as a,e as h,s as E,l as at,t as pt,c as d,k as D,f as T,m as it,b as kt,p as ut,o as O,q as B,j as _t,r as ct,u as mt,v as ft}from"../chunks/index.mMZYYaUn.js";import{a as ht}from"../chunks/firebase.4_HkC9tC.js";import{g as dt,d as vt,r as W,s as bt,b as Ct}from"../chunks/index.esm2017.CPFognq0.js";function yt(l){let t,n;return{c(){t=M("svg"),n=M("path"),this.h()},l(e){t=z(e,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,style:!0,class:!0});var s=b(t);n=z(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(n).forEach(v),s.forEach(v),this.h()},h(){o(n,"stroke-linecap","round"),o(n,"stroke-linejoin","round"),o(n,"d","m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"fill","none"),o(t,"viewBox","0 0 24 24"),o(t,"stroke-width","1.5"),o(t,"stroke","currentColor"),w(t,"width",l[0]+"rem"),w(t,"margin-left",l[1]+"rem"),w(t,"color",l[2]),o(t,"class","svelte-1n1px90")},m(e,s){$(e,t,s),a(t,n)},p(e,[s]){s&1&&w(t,"width",e[0]+"rem"),s&2&&w(t,"margin-left",e[1]+"rem"),s&4&&w(t,"color",e[2])},i:V,o:V,d(e){e&&v(t)}}}function xt(l,t,n){let{width:e="2"}=t,{ml:s="0"}=t,{color:c="black"}=t;return l.$$set=r=>{"width"in r&&n(0,e=r.width),"ml"in r&&n(1,s=r.ml),"color"in r&&n(2,c=r.color)},[e,s,c]}class Et extends Y{constructor(t){super(),Z(this,t,xt,yt,X,{width:0,ml:1,color:2})}}function Tt(l){let t,n;return{c(){t=M("svg"),n=M("path"),this.h()},l(e){t=z(e,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,style:!0});var s=b(t);n=z(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),b(n).forEach(v),s.forEach(v),this.h()},h(){o(n,"stroke-linecap","round"),o(n,"stroke-linejoin","round"),o(n,"d","M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"fill","none"),o(t,"viewBox","0 0 24 24"),o(t,"stroke-width","1.5"),o(t,"stroke","currentColor"),w(t,"width",l[0]+"rem"),w(t,"margin-left",l[1]+"rem"),w(t,"color",l[2])},m(e,s){$(e,t,s),a(t,n)},p(e,[s]){s&1&&w(t,"width",e[0]+"rem"),s&2&&w(t,"margin-left",e[1]+"rem"),s&4&&w(t,"color",e[2])},i:V,o:V,d(e){e&&v(t)}}}function Lt(l,t,n){let{width:e="2"}=t,{ml:s="0"}=t,{color:c="black"}=t;return l.$$set=r=>{"width"in r&&n(0,e=r.width),"ml"in r&&n(1,s=r.ml),"color"in r&&n(2,c=r.color)},[e,s,c]}class Nt extends Y{constructor(t){super(),Z(this,t,Lt,Tt,X,{width:0,ml:1,color:2})}}function Bt(l){let t,n,e,s="Edit Link",c,r,f,g,U,k,C,I,y,H="Name",P,u,p,_,tt="URL",K,x,F,L,et="Save",G,N,nt="Cancel",J,q,A,j,Q,st;return g=new Nt({}),C=new Et({}),{c(){t=h("main"),n=h("div"),e=h("h4"),e.textContent=s,c=E(),r=h("div"),f=h("button"),at(g.$$.fragment),U=E(),k=h("button"),at(C.$$.fragment),I=E(),y=h("label"),y.textContent=H,P=E(),u=h("input"),p=E(),_=h("label"),_.textContent=tt,K=E(),x=h("input"),F=E(),L=h("button"),L.textContent=et,G=E(),N=h("button"),N.textContent=nt,J=E(),q=h("p"),A=pt(l[2]),this.h()},l(m){t=d(m,"MAIN",{});var i=b(t);n=d(i,"DIV",{class:!0});var R=b(n);e=d(R,"H4",{"data-svelte-h":!0}),D(e)!=="svelte-1unjjo2"&&(e.textContent=s),c=T(R),r=d(R,"DIV",{class:!0});var S=b(r);f=d(S,"BUTTON",{class:!0});var rt=b(f);it(g.$$.fragment,rt),rt.forEach(v),U=T(S),k=d(S,"BUTTON",{class:!0});var ot=b(k);it(C.$$.fragment,ot),ot.forEach(v),S.forEach(v),R.forEach(v),I=T(i),y=d(i,"LABEL",{for:!0,"data-svelte-h":!0}),D(y)!=="svelte-bs9sy6"&&(y.textContent=H),P=T(i),u=d(i,"INPUT",{type:!0,id:!0}),p=T(i),_=d(i,"LABEL",{for:!0,"data-svelte-h":!0}),D(_)!=="svelte-8q15uc"&&(_.textContent=tt),K=T(i),x=d(i,"INPUT",{id:!0}),F=T(i),L=d(i,"BUTTON",{class:!0,"data-svelte-h":!0}),D(L)!=="svelte-b7uzot"&&(L.textContent=et),G=T(i),N=d(i,"BUTTON",{class:!0,"data-svelte-h":!0}),D(N)!=="svelte-1cgk8qu"&&(N.textContent=nt),J=T(i),q=d(i,"P",{class:!0});var lt=b(q);A=kt(lt,l[2]),lt.forEach(v),i.forEach(v),this.h()},h(){o(f,"class","btnless svelte-1tvsxqb"),o(k,"class","btnless svelte-1tvsxqb"),o(r,"class","lrow icons svelte-1tvsxqb"),o(n,"class","lrow"),o(y,"for","name"),o(u,"type","text"),o(u,"id","name"),u.autofocus=!0,o(_,"for","URL"),o(x,"id","url"),o(L,"class","svelte-1tvsxqb"),o(N,"class","button-outline svelte-1tvsxqb"),o(q,"class","message svelte-1tvsxqb")},m(m,i){$(m,t,i),a(t,n),a(n,e),a(n,c),a(n,r),a(r,f),ut(g,f,null),a(r,U),a(r,k),ut(C,k,null),a(t,I),a(t,y),a(t,P),a(t,u),O(u,l[0]),a(t,p),a(t,_),a(t,K),a(t,x),O(x,l[1]),a(t,F),a(t,L),a(t,G),a(t,N),a(t,J),a(t,q),a(q,A),j=!0,u.focus(),Q||(st=[B(f,"click",l[4]),B(k,"click",l[5]),B(u,"input",l[7]),B(u,"keypress",l[6]),B(x,"input",l[8]),B(x,"keypress",l[6]),B(L,"click",l[3]),B(N,"click",Ut)],Q=!0)},p(m,[i]){i&1&&u.value!==m[0]&&O(u,m[0]),i&2&&x.value!==m[1]&&O(x,m[1]),(!j||i&4)&&_t(A,m[2])},i(m){j||(ct(g.$$.fragment,m),ct(C.$$.fragment,m),j=!0)},o(m){mt(g.$$.fragment,m),mt(C.$$.fragment,m),j=!1},d(m){m&&v(t),ft(g),ft(C),Q=!1,wt(st)}}}function Ut(){window.location.href="/links"}function qt(l,t,n){let e,s,c="",r="",f,g="",U="";gt(()=>{f=localStorage.getItem("username");function u(p){return new URLSearchParams(window.location.search).get(p)}e=u("name"),s=u("url"),e&&(n(0,c=e),n(1,r=s))});async function k(){if(!c.trim()||!r.trim()){console.log("Name and URL cannot be blank.");return}const u=dt(ht);try{c!==e&&await vt(W(u,`users/${f}/links/${e}`));const p=W(u,`users/${f}/links/${c}`);await bt(p,{name:c,url:r,timestamp:Ct()}),n(0,c=""),n(1,r=""),window.location.href="/links"}catch(p){console.error("Error adding/updating link:",p)}}function C(){console.log(e),console.log(s),console.log(f),n(2,U="Copied shortlink"),console.log(g),g=`http://${e}.linksaw.com/${f}`,navigator.clipboard.writeText(g),setTimeout(()=>{n(2,U="")},2e3)}async function I(){if(!e){console.log("No link to delete.");return}if(!window.confirm("Are you sure you want to delete this link?"))return;const p=dt(ht);try{await vt(W(p,`users/${f}/links/${e}`)),window.location.href="/links"}catch(_){console.error("Error deleting link:",_)}}function y(u){u.key==="Enter"&&k()}function H(){c=this.value,n(0,c)}function P(){r=this.value,n(1,r)}return[c,r,U,k,C,I,y,H,P]}class Ht extends Y{constructor(t){super(),Z(this,t,qt,Bt,X,{})}}export{Ht as component};
