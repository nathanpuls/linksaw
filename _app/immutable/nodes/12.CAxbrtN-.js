import{s as p,o as m}from"../chunks/scheduler.Cx9Dz3y6.js";import{S as g,i as h}from"../chunks/index.CaLiHKVj.js";import{g as d,r as k,a as w}from"../chunks/index.esm2017.CPFognq0.js";import{a as x}from"../chunks/firebase.4_HkC9tC.js";function c(n,e){e||(e=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),o=r.exec(e);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function $(n){let e,r;return m(()=>{const o=d(x);e=c("username"),e&&(e=e.replace(/[^a-zA-Z0-9]/g,"")),r=c("linkname"),console.log("Username:",e,"Linkname:",r);async function f(){try{const s=k(o,`users/${e}/links`),i=await w(s);if(i.exists()){const l=i.val();for(const u in l){const a=l[u];if(a&&a.name===r){let t=a.url;!t.startsWith("http://")&&!t.startsWith("https://")&&!t.startsWith("www")&&(t="http://"+t),console.log("Redirecting to:",t),window.location.href=t;return}}console.error("Link not found.")}else console.error("User not found.")}catch(s){console.error("Error fetching link data:",s)}}f()}),[]}class L extends g{constructor(e){super(),h(this,e,$,null,p,{})}}export{L as component};
